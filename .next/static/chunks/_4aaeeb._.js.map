{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/karolita/Documents/GitHub/B-Ride-The-Ride-Sharing-App-for-Bruins/src/app/profileapp/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function EditProfilePage() {\n  const router = useRouter();\n  const [user, setUser] = useState({\n    id: \"\",\n    name: \"\",\n    email: \"\",\n    bio: \"\",\n    profilePic: \"/default-avatar.png\",\n    preferences: {\n      language: \"\",\n      ridePreference: \"\",\n    },\n  });\n\n  useEffect(() => {\n    const userEmail = localStorage.getItem(\"userEmail\");\n\n    if (!userEmail) {\n      console.error(\"No user email found in localStorage\");\n      return;\n    }\n\n    fetch(`http://localhost:5001/users/email/${userEmail}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data && data.id) {\n          setUser({\n            id: data.id,\n            name: data.name,\n            email: data.email,\n            bio: data.bio || \"\",\n            profilePic: data.profile_picture || \"/default-avatar.png\",\n            preferences: {\n              language: data.language || \"\",\n              ridePreference: data.ride_preference || \"\",\n            },\n          });\n\n          // Store correct user data in localStorage\n          localStorage.setItem(\"user\", JSON.stringify(data));\n          window.dispatchEvent(new Event(\"storage\")); // Notify all pages\n        } else {\n          console.error(\"User data not found\");\n        }\n      })\n      .catch((error) => console.error(\"Failed to fetch profile:\", error));\n  }, []);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setUser((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!user.id) {\n      alert(\"Error: User ID is missing. Try refreshing the page.\");\n      return;\n    }\n\n    try {\n      const response = await fetch(`http://localhost:5001/users/update/${user.id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          name: user.name,\n          bio: user.bio,\n          language: user.preferences.language,\n          ride_preference: user.preferences.ridePreference,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to update profile\");\n      }\n\n      const updatedUser = { ...user };\n      localStorage.setItem(\"user\", JSON.stringify(updatedUser));\n      window.dispatchEvent(new Event(\"storage\")); // Update all pages\n\n      alert(\"Profile updated successfully!\");\n      router.push(\"/profile\");\n    } catch (error) {\n      console.error(\"Error updating profile:\", error);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center min-h-screen bg-gradient-to-b from-[#3268B7] to-[#1A437A] p-6\">\n      <div className=\"relative w-full max-w-md bg-white shadow-lg rounded-lg text-center pb-6\">\n        <div className=\"bg-gradient-to-r from-[#3268B7] to-[#1A437A] h-28 rounded-t-lg\"></div>\n\n        <div className=\"relative -top-10 flex justify-center\">\n          <img\n            src={user.profilePic || \"/default-avatar.png\"}\n            alt=\"Profile\"\n            className=\"w-24 h-24 rounded-full border-4 border-white shadow-md\"\n          />\n        </div>\n\n        <h1 className=\"text-2xl font-bold text-black mt-2\">Edit Your Profile</h1>\n\n        <form onSubmit={handleSubmit} className=\"p-6 text-black\">\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={user.name}\n            onChange={handleChange}\n            className=\"w-full p-2 border rounded mb-3 text-black placeholder-gray-500\"\n            placeholder=\"Enter your name\"\n          />\n          <textarea\n            name=\"bio\"\n            value={user.bio}\n            onChange={handleChange}\n            className=\"w-full p-2 border rounded mb-3 text-black placeholder-gray-500\"\n            placeholder=\"Enter your bio\"\n          />\n          <input\n            type=\"text\"\n            name=\"language\"\n            value={user.preferences.language}\n            onChange={(e) => setUser((prev) => ({ ...prev, preferences: { ...prev.preferences, language: e.target.value } }))}\n            className=\"w-full p-2 border rounded mb-3 text-black placeholder-gray-500\"\n            placeholder=\"Preferred Language\"\n          />\n          <input\n            type=\"text\"\n            name=\"ridePreference\"\n            value={user.preferences.ridePreference}\n            onChange={(e) => setUser((prev) => ({ ...prev, preferences: { ...prev.preferences, ridePreference: e.target.value } }))}\n            className=\"w-full p-2 border rounded mb-3 text-black placeholder-gray-500\"\n            placeholder=\"Ride Preference\"\n          />\n\n          <div className=\"mt-4 flex justify-center gap-3\">\n            <button\n              type=\"submit\"\n              className=\"px-5 py-1 bg-gradient-to-r from-[#172554] to-[#2563eb] hover:opacity-90 text-white shadow-md rounded-full text-sm font-medium w-auto\"\n            >\n              Save Changes\n            </button>\n            <button\n              type=\"button\"\n              className=\"px-5 py-1 bg-gradient-to-r from-[#172554] to-[#2563eb] hover:opacity-90 text-white shadow-md rounded-full text-sm font-medium w-auto\"\n              onClick={() => router.push(\"/profile\")}\n            >\n              Back to Profile\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///Users/karolita/Documents/GitHub/B-Ride-The-Ride-Sharing-App-for-Bruins/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}