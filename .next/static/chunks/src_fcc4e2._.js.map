{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/karolita/Documents/GitHub/B-Ride-The-Ride-Sharing-App-for-Bruins/src/components/Map.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\n// Fix for missing marker icons:\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl:\n    \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png\",\n  iconUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png\",\n  shadowUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png\",\n});\n\nconst defaultCenter = { lat: 34.0689, lng: -118.4452 }; // Default to UCLA\n\nexport default function Map() {\n  const mapRef = useRef<L.Map | null>(null);\n  const mapContainerRef = useRef<HTMLDivElement | null>(null);\n  const [locations, setLocations] = useState<{ lat: number; lng: number }[]>([]);\n\n  // Post current user's location to the API when the component mounts\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const { latitude, longitude } = position.coords;\n          const userId = \"myUser\"; // For testing; in production, use a unique user id\n          try {\n            await fetch(\"/api/locations\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n              },\n              body: JSON.stringify({ userId, lat: latitude, lng: longitude }),\n            });\n          } catch (error) {\n            console.error(\"Error posting location:\", error);\n          }\n        },\n        (error) => {\n          console.error(\"Error getting geolocation:\", error);\n        }\n      );\n    }\n  }, []);\n\n  // Fetch updated locations from the API every 5 seconds\n  useEffect(() => {\n    const fetchLocations = async () => {\n      try {\n        const res = await fetch(\"/api/locations\");\n        const data = await res.json();\n        setLocations(data.locations);\n      } catch (error) {\n        console.error(\"Error fetching locations:\", error);\n      }\n    };\n\n    // Initial fetch\n    fetchLocations();\n\n    const interval = setInterval(fetchLocations, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Initialize the map and update markers when locations change\n  useEffect(() => {\n    if (!mapContainerRef.current) return;\n\n    if (!mapRef.current) {\n      mapRef.current = L.map(mapContainerRef.current).setView(\n        [defaultCenter.lat, defaultCenter.lng],\n        12\n      );\n\n      L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n        attribution: \"&copy; OpenStreetMap contributors\",\n      }).addTo(mapRef.current);\n    }\n\n    // Remove existing markers\n    mapRef.current.eachLayer((layer) => {\n      if (layer instanceof L.Marker) {\n        mapRef.current?.removeLayer(layer);\n      }\n    });\n\n    // Add new markers for each location\n    locations.forEach((loc) => {\n      L.marker([loc.lat, loc.lng]).addTo(mapRef.current!);\n    });\n  }, [locations]);\n\n  return <div ref={mapContainerRef} style={{ width: \"100%\", height: \"100%\" }} />;\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;;AAMA,gCAAgC;AAChC,OAAO,oJAAA,CAAA,UAAC,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,WAAW;AAC3C,oJAAA,CAAA,UAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;IAC1B,eACE;IACF,SAAS;IACT,WAAW;AACb;AAEA,MAAM,gBAAgB;IAAE,KAAK;IAAS,KAAK,CAAC;AAAS,GAAG,kBAAkB;AAE3D,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAgB;IACpC,MAAM,kBAAkB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAyB;IACtD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAkC,EAAE;IAE7E,oEAAoE;IACpE,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;yBAAE;YACR,IAAI,UAAU,WAAW,EAAE;gBACzB,UAAU,WAAW,CAAC,kBAAkB;qCACtC,OAAO;wBACL,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,SAAS,MAAM;wBAC/C,MAAM,SAAS,UAAU,mDAAmD;wBAC5E,IAAI;4BACF,MAAM,MAAM,kBAAkB;gCAC5B,QAAQ;gCACR,SAAS;oCACP,gBAAgB;gCAClB;gCACA,MAAM,KAAK,SAAS,CAAC;oCAAE;oCAAQ,KAAK;oCAAU,KAAK;gCAAU;4BAC/D;wBACF,EAAE,OAAO,OAAO;4BACd,QAAQ,KAAK,CAAC,2BAA2B;wBAC3C;oBACF;;qCACA,CAAC;wBACC,QAAQ,KAAK,CAAC,8BAA8B;oBAC9C;;YAEJ;QACF;wBAAG,EAAE;IAEL,uDAAuD;IACvD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;yBAAE;YACR,MAAM;gDAAiB;oBACrB,IAAI;wBACF,MAAM,MAAM,MAAM,MAAM;wBACxB,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,aAAa,KAAK,SAAS;oBAC7B,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,6BAA6B;oBAC7C;gBACF;;YAEA,gBAAgB;YAChB;YAEA,MAAM,WAAW,YAAY,gBAAgB;YAC7C;iCAAO,IAAM,cAAc;;QAC7B;wBAAG,EAAE;IAEL,8DAA8D;IAC9D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;yBAAE;YACR,IAAI,CAAC,gBAAgB,OAAO,EAAE;YAE9B,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,OAAO,OAAO,GAAG,oJAAA,CAAA,UAAC,CAAC,GAAG,CAAC,gBAAgB,OAAO,EAAE,OAAO,CACrD;oBAAC,cAAc,GAAG;oBAAE,cAAc,GAAG;iBAAC,EACtC;gBAGF,oJAAA,CAAA,UAAC,CAAC,SAAS,CAAC,sDAAsD;oBAChE,aAAa;gBACf,GAAG,KAAK,CAAC,OAAO,OAAO;YACzB;YAEA,0BAA0B;YAC1B,OAAO,OAAO,CAAC,SAAS;iCAAC,CAAC;oBACxB,IAAI,iBAAiB,oJAAA,CAAA,UAAC,CAAC,MAAM,EAAE;wBAC7B,OAAO,OAAO,EAAE,YAAY;oBAC9B;gBACF;;YAEA,oCAAoC;YACpC,UAAU,OAAO;iCAAC,CAAC;oBACjB,oJAAA,CAAA,UAAC,CAAC,MAAM,CAAC;wBAAC,IAAI,GAAG;wBAAE,IAAI,GAAG;qBAAC,EAAE,KAAK,CAAC,OAAO,OAAO;gBACnD;;QACF;wBAAG;QAAC;KAAU;IAEd,qBAAO,6LAAC;QAAI,KAAK;QAAiB,OAAO;YAAE,OAAO;YAAQ,QAAQ;QAAO;;;;;;AAC3E;GA/EwB;KAAA"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///Users/karolita/Documents/GitHub/B-Ride-The-Ride-Sharing-App-for-Bruins/src/components/ui/button.tsx"],"sourcesContent":["import React from 'react';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {}\n\nexport const Button: React.FC<ButtonProps> = ({ children, className, ...props }) => {\n  return (\n    <button {...props} className={className}>\n      {children}\n    </button>\n  );\n};\n"],"names":[],"mappings":";;;;;AAIO,MAAM,SAAgC,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAO;IAC7E,qBACE,6LAAC;QAAQ,GAAG,KAAK;QAAE,WAAW;kBAC3B;;;;;;AAGP;KANa"}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///Users/karolita/Documents/GitHub/B-Ride-The-Ride-Sharing-App-for-Bruins/src/app/map/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport Map from \"@/components/Map\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function MapPage() {\n  const router = useRouter();\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-6\">\n      <h1 className=\"text-3xl font-bold mb-4\">Live User Locations</h1>\n      <div className=\"w-[50vw] h-[50vh] rounded-md shadow-md\">\n        <Map />\n      </div>\n      <Button\n        onClick={() => router.push(\"/dashboard\")}\n        className=\"bg-gray-500 hover:bg-gray-600 text-white mt-4\"\n      >\n        Go Back\n      </Button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,4HAAA,CAAA,UAAG;;;;;;;;;;0BAEN,6LAAC,qIAAA,CAAA,SAAM;gBACL,SAAS,IAAM,OAAO,IAAI,CAAC;gBAC3B,WAAU;0BACX;;;;;;;;;;;;AAKP;GAjBwB;;QACP,qIAAA,CAAA,YAAS;;;KADF"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}