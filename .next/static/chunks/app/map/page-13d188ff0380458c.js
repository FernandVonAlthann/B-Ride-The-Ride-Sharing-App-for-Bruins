(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[823],{6901:(e,t,r)=>{Promise.resolve().then(r.bind(r,1504))},6046:(e,t,r)=>{"use strict";var n=r(6658);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},1504:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(5155),o=r(6046),a=r(2115),s=r(8741),c=r.n(s);r(8413),delete c().Icon.Default.prototype._getIconUrl,c().Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});let l={lat:34.0689,lng:-118.4452};function i(){let e=(0,a.useRef)(null),t=(0,a.useRef)(null),[r,o]=(0,a.useState)([]);return(0,a.useEffect)(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(async e=>{let{latitude:t,longitude:r}=e.coords;try{await fetch("/api/locations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:"myUser",lat:t,lng:r})})}catch(e){console.error("Error posting location:",e)}},e=>{console.error("Error getting geolocation:",e)})},[]),(0,a.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/locations"),t=await e.json();o(t.locations)}catch(e){console.error("Error fetching locations:",e)}};e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[]),(0,a.useEffect)(()=>{t.current&&(e.current||(e.current=c().map(t.current).setView([l.lat,l.lng],12),c().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(e.current)),e.current.eachLayer(t=>{if(t instanceof c().Marker){var r;null===(r=e.current)||void 0===r||r.removeLayer(t)}}),r.forEach(t=>{c().marker([t.lat,t.lng]).addTo(e.current)}))},[r]),(0,n.jsx)("div",{ref:t,style:{width:"100%",height:"100%"}})}var u=r(3312);function d(){let e=(0,o.useRouter)();return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Live User Locations"}),(0,n.jsx)("div",{className:"w-[50vw] h-[50vh] rounded-md shadow-md",children:(0,n.jsx)(i,{})}),(0,n.jsx)(u.$,{onClick:()=>e.push("/dashboard"),className:"bg-gray-500 hover:bg-gray-600 text-white mt-4",children:"Go Back"})]})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var n=r(5155);r(2115);let o=e=>{let{children:t,className:r,...o}=e;return(0,n.jsx)("button",{...o,className:r,children:t})}},8413:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[484,761,441,517,358],()=>t(6901)),_N_E=e.O()}]);